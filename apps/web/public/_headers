# Cloudflare Pages Custom Headers
# Fix MIME types for JavaScript files

# Static assets with content hash - cache forever
/_next/static/chunks/*
  Content-Type: text/javascript; charset=utf-8
  X-Content-Type-Options: nosniff
  Cache-Control: public, max-age=31536000, immutable

/_next/static/chunks/app/*
  Content-Type: text/javascript; charset=utf-8
  X-Content-Type-Options: nosniff

/_next/static/chunks/pages/*
  Content-Type: text/javascript; charset=utf-8
  X-Content-Type-Options: nosniff

/*.js
  Content-Type: text/javascript; charset=utf-8
  X-Content-Type-Options: nosniff

/_next/static/css/*
  Content-Type: text/css; charset=utf-8
  X-Content-Type-Options: nosniff

/*.css
  Content-Type: text/css; charset=utf-8
  X-Content-Type-Options: nosniff

# Security headers for all pages
/*
  X-Frame-Options: DENY
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin

# ===========================================
# PERFORMANCE OPTIMIZATION - TTFB Reduction
# See: docs/PERFORMANCE_OPTIMIZATION_PLAN_V2.md
# ===========================================

# Public pages - Edge cache with stale-while-revalidate
# These pages are static for guests, cache aggressively
/
  Cache-Control: public, max-age=60, stale-while-revalidate=300
  CDN-Cache-Control: public, max-age=300

/login
  Cache-Control: public, max-age=60, stale-while-revalidate=300
  CDN-Cache-Control: public, max-age=300

/register
  Cache-Control: public, max-age=60, stale-while-revalidate=300
  CDN-Cache-Control: public, max-age=300

/signup
  Cache-Control: public, max-age=60, stale-while-revalidate=300
  CDN-Cache-Control: public, max-age=300

/forgot-password
  Cache-Control: public, max-age=60, stale-while-revalidate=300
  CDN-Cache-Control: public, max-age=300

# Protected app pages - no cache (dynamic content per user)
/app/*
  Cache-Control: private, no-cache, no-store, must-revalidate

# Onboarding pages - no cache (user-specific state)
/onboarding/*
  Cache-Control: private, no-cache, no-store, must-revalidate

# Invite acceptance - no cache
/invite/*
  Cache-Control: private, no-cache, no-store, must-revalidate
